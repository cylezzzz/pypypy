<!DOCTYPE html>
<html lang="de" data-theme="dark">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Create Studio ‚Äì AndioMediaStudio</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><defs><linearGradient id=%22grad%22 x1=%220%%22 y1=%220%%22 x2=%22100%%22 y2=%22100%%22><stop offset=%220%%22 style=%22stop-color:%236aa3ff%22/><stop offset=%22100%%22 style=%22stop-color:%23b884ff%22/></linearGradient></defs><circle cx=%2250%22 cy=%2250%22 r=%2240%22 fill=%22url(%23grad)%22/></svg>">
    <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
    <header class="header">
        <div class="brand">
            <span class="dot"></span>
            <span>Create Studio ‚Äì AndioMediaStudio</span>
            <div class="badge nsfw">üî• Unlimited</div>
        </div>
        <nav>
            <a href="index.html">üìä Dashboard</a>
            <a href="create.html" class="active">üé® Create</a>
            <a href="video.html">üé¨ Video Lab</a>
            <a href="talking.html">üí¨ Talking</a>
            <a href="wardrobe.html">üëî Wardrobe</a>
            <a href="catalog.html">üè™ Store</a>
            <a href="gallery.html">üñºÔ∏è Gallery</a>
        </nav>
    </header>

    <main class="wrap">
        <div class="create-container">
            <h2>üé® AI Create Studio - No Limits</h2>
            
            <!-- System Status -->
            <div class="system-status" style="margin-bottom: 20px; padding: 16px; background: var(--glass-bg); border-radius: 12px; border: 1px solid var(--border-primary);">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div class="status-indicator" id="systemStatus">
                        <div class="pulse" style="width: 12px; height: 12px; border-radius: 50%; background: #fbbf24;"></div>
                        <span>Checking system...</span>
                    </div>
                    <div id="modelInfo" style="font-size: 12px; color: var(--text-muted);">
                        Loading models...
                    </div>
                </div>
            </div>
            
            <!-- Mode Selection -->
            <div class="mode-selector">
                <button class="mode-btn active" data-mode="txt2img" onclick="selectMode('txt2img')">
                    <span style="font-size: 18px;">‚ú®</span>
                    <span>Text ‚Üí Image</span>
                </button>
                <button class="mode-btn" data-mode="img2img" onclick="selectMode('img2img')">
                    <span style="font-size: 18px;">üñºÔ∏è</span>
                    <span>Image ‚Üí Image</span>
                </button>
                <button class="mode-btn" data-mode="inpaint" onclick="selectMode('inpaint')">
                    <span style="font-size: 18px;">‚úèÔ∏è</span>
                    <span>Inpainting</span>
                </button>
            </div>

            <div id="progressHost"></div>

            <div class="grid">
                <!-- Main Creation Panel -->
                <div style="grid-column: span 8;">
                    <!-- Prompt Section -->
                    <div class="card">
                        <h3>üí≠ Creative Prompt</h3>
                        <textarea id="mainPrompt" class="input" rows="4" 
                                 placeholder="Describe your vision... e.g., 'a beautiful woman in an elegant red dress, photorealistic, studio lighting, high detail'"></textarea>
                        
                        <div style="margin-top: 16px;">
                            <label>üö´ Negative Prompt</label>
                            <textarea id="negativePrompt" class="input" rows="2"
                                     placeholder="What to avoid... e.g., 'blurry, low quality, distorted'"></textarea>
                        </div>
                        
                        <!-- Quick Style Buttons -->
                        <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px;">
                            <button class="btn secondary" onclick="addStyle('photorealistic, 8k, ultra detailed')">üì∏ Photorealistic</button>
                            <button class="btn secondary" onclick="addStyle('anime style, manga')">üéå Anime</button>
                            <button class="btn secondary" onclick="addStyle('oil painting, classical art')">üé® Classical</button>
                            <button class="btn secondary" onclick="addStyle('cyberpunk, neon, futuristic')">üåÉ Cyberpunk</button>
                            <button class="btn secondary" onclick="addStyle('fantasy, magical, ethereal')">üîÆ Fantasy</button>
                        </div>
                    </div>

                    <!-- File Upload (for img2img/inpaint) -->
                    <div class="card" id="uploadSection" style="display: none;">
                        <h3>üìÅ Upload Image</h3>
                        <div class="upload-zone" onclick="triggerUpload()" style="border: 2px dashed var(--border-primary); border-radius: 12px; padding: 32px; text-align: center; cursor: pointer;">
                            <div style="font-size: 48px; margin-bottom: 16px;">üì∏</div>
                            <div>Drop image here or click to upload</div>
                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 8px;">Supports JPG, PNG, WebP</div>
                        </div>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                        <div id="uploadPreview" style="margin-top: 16px;"></div>
                    </div>

                    <!-- Generation Controls -->
                    <div class="card">
                        <div class="toolbar">
                            <button class="btn" id="generateBtn" onclick="generateImage()">
                                üöÄ Generate AI Art
                            </button>
                            <button class="btn secondary" onclick="randomizeSettings()">üé≤ Random</button>
                            <button class="btn secondary" onclick="clearPrompts()">üóëÔ∏è Clear</button>
                        </div>
                    </div>

                    <!-- Results -->
                    <div id="resultsSection" style="display: none;">
                        <div class="card">
                            <h3>üéØ Generated Results</h3>
                            <div id="resultsGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Panel -->
                <div style="grid-column: span 4;">
                    <div class="card">
                        <h3>‚öôÔ∏è Generation Settings</h3>
                        
                        <!-- Quality Presets -->
                        <div style="margin-bottom: 16px;">
                            <label>üéöÔ∏è Quality Preset</label>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                                <button class="btn secondary preset-btn" data-quality="FAST" onclick="selectQuality('FAST')">‚ö° Fast</button>
                                <button class="btn preset-btn active" data-quality="BALANCED" onclick="selectQuality('BALANCED')">‚öñÔ∏è Balanced</button>
                                <button class="btn secondary preset-btn" data-quality="ULTRA" onclick="selectQuality('ULTRA')">üíé Ultra</button>
                            </div>
                        </div>

                        <!-- Dimensions -->
                        <div style="margin-bottom: 16px;">
                            <label>üìê Dimensions</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                                <input id="widthInput" class="input" type="number" value="768" min="256" max="2048" step="64">
                                <input id="heightInput" class="input" type="number" value="768" min="256" max="2048" step="64">
                            </div>
                            <div style="display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap;">
                                <button class="btn secondary" onclick="setDimensions(768, 768)">Square</button>
                                <button class="btn secondary" onclick="setDimensions(768, 1024)">Portrait</button>
                                <button class="btn secondary" onclick="setDimensions(1024, 768)">Landscape</button>
                            </div>
                        </div>

                        <!-- Advanced Settings -->
                        <div style="margin-bottom: 16px;">
                            <label>üéØ Guidance Scale: <span id="guidanceValue">7.5</span></label>
                            <input type="range" id="guidanceSlider" class="input" min="1" max="20" value="7.5" step="0.5">
                        </div>

                        <div style="margin-bottom: 16px;">
                            <label>‚ö° Steps: <span id="stepsValue">20</span></label>
                            <input type="range" id="stepsSlider" class="input" min="10" max="100" value="20">
                        </div>

                        <div style="margin-bottom: 16px;">
                            <label>üé≤ Seed</label>
                            <div style="display: flex; gap: 8px;">
                                <input id="seedInput" class="input" type="number" placeholder="Random">
                                <button class="btn secondary" onclick="randomSeed()">üé≤</button>
                            </div>
                        </div>

                        <!-- Model Selection -->
                        <div style="margin-bottom: 16px;">
                            <label>ü§ñ AI Model</label>
                            <select id="modelSelect" class="input">
                                <option value="">Loading models...</option>
                            </select>
                        </div>

                        <!-- Progress Display -->
                        <div id="progressContainer" style="display: none; margin-top: 20px;">
                            <div class="progress">
                                <div class="bar" id="progressBar"></div>
                                <div class="label" id="progressLabel">Ready</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Enhanced Create Studio with Real API Integration
        class CreateStudio {
            constructor() {
                this.currentMode = 'txt2img';
                this.uploadedFile = null;
                this.currentJob = null;
                this.websocket = null;
                
                this.init();
            }

            async init() {
                this.setupEventListeners();
                await this.checkSystemStatus();
                await this.loadModels();
            }

            setupEventListeners() {
                // Sliders
                const guidanceSlider = document.getElementById('guidanceSlider');
                const stepsSlider = document.getElementById('stepsSlider');
                
                guidanceSlider?.addEventListener('input', (e) => {
                    document.getElementById('guidanceValue').textContent = e.target.value;
                });
                
                stepsSlider?.addEventListener('input', (e) => {
                    document.getElementById('stepsValue').textContent = e.target.value;
                });

                // File upload
                const fileInput = document.getElementById('fileInput');
                fileInput?.addEventListener('change', (e) => {
                    this.handleFileUpload(e.target.files[0]);
                });

                // Drag and drop
                const uploadZone = document.querySelector('.upload-zone');
                if (uploadZone) {
                    uploadZone.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        uploadZone.style.borderColor = 'var(--accent-primary)';
                    });
                    
                    uploadZone.addEventListener('dragleave', () => {
                        uploadZone.style.borderColor = 'var(--border-primary)';
                    });
                    
                    uploadZone.addEventListener('drop', (e) => {
                        e.preventDefault();
                        uploadZone.style.borderColor = 'var(--border-primary)';
                        if (e.dataTransfer.files.length > 0) {
                            this.handleFileUpload(e.dataTransfer.files[0]);
                        }
                    });
                }
            }

            async checkSystemStatus() {
                try {
                    const response = await fetch('/api/ping');
                    const data = await response.json();
                    
                    const statusEl = document.getElementById('systemStatus');
                    const modelInfoEl = document.getElementById('modelInfo');
                    
                    if (data.ok) {
                        statusEl.innerHTML = `
                            <div class="pulse" style="width: 12px; height: 12px; border-radius: 50%; background: #16a34a;"></div>
                            <span>System Online</span>
                        `;
                        
                        const systemInfo = data.system;
                        modelInfoEl.textContent = `GPU: ${systemInfo.cuda_available ? systemInfo.cuda_device || 'Available' : 'CPU Only'} | Models: ${systemInfo.models_loaded ? 'Loaded' : 'Loading...'}`;
                    } else {
                        statusEl.innerHTML = `
                            <div class="pulse" style="width: 12px; height: 12px; border-radius: 50%; background: #dc2626;"></div>
                            <span>System Offline</span>
                        `;
                    }
                } catch (error) {
                    console.error('System check failed:', error);
                    document.getElementById('systemStatus').innerHTML = `
                        <div class="pulse" style="width: 12px; height: 12px; border-radius: 50%; background: #dc2626;"></div>
                        <span>Connection Failed</span>
                    `;
                }
            }

            async loadModels() {
                try {
                    const response = await fetch('/api/models');
                    const data = await response.json();
                    
                    const modelSelect = document.getElementById('modelSelect');
                    modelSelect.innerHTML = '<option value="">Auto-Select</option>';
                    
                    data.models.forEach(model => {
                        const option = document.createElement('option');
                        option.value = model.name;
                        option.textContent = `${model.name} (${model.group})`;
                        modelSelect.appendChild(option);
                    });
                    
                    this.showToast('Models loaded successfully', 'success');
                } catch (error) {
                    console.error('Failed to load models:', error);
                    this.showToast('Failed to load models', 'error');
                }
            }

            async handleFileUpload(file) {
                if (!file) return;
                
                try {
                    const formData = new FormData();
                    formData.append('file', file);
                    
                    const response = await fetch('/api/upload', {
                        method: 'POST',
                        body: formData
                    });
                    
                    const result = await response.json();
                    
                    if (result.ok) {
                        this.uploadedFile = result;
                        this.showUploadPreview(result);
                        this.showToast('File uploaded successfully', 'success');
                    } else {
                        throw new Error('Upload failed');
                    }
                } catch (error) {
                    console.error('Upload failed:', error);
                    this.showToast('Upload failed', 'error');
                }
            }

            showUploadPreview(fileInfo) {
                const preview = document.getElementById('uploadPreview');
                if (fileInfo.type === 'image') {
                    preview.innerHTML = `
                        <div style="display: flex; gap: 12px; align-items: center; padding: 12px; background: var(--glass-bg); border-radius: 8px;">
                            <img src="${fileInfo.url}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 6px;">
                            <div>
                                <div style="font-weight: 600;">${fileInfo.name}</div>
                                <div style="font-size: 12px; color: var(--text-muted);">
                                    ${fileInfo.width} √ó ${fileInfo.height} | ${this.formatFileSize(fileInfo.size)}
                                </div>
                            </div>
                            <button class="btn secondary" onclick="studio.clearUpload()" style="margin-left: auto;">üóëÔ∏è</button>
                        </div>
                    `;
                }
            }

            clearUpload() {
                this.uploadedFile = null;
                document.getElementById('uploadPreview').innerHTML = '';
            }

            async generateImage() {
                const prompt = document.getElementById('mainPrompt').value.trim();
                if (!prompt) {
                    this.showToast('Please enter a prompt', 'warning');
                    return;
                }

                // Check if file is required for current mode
                if ((this.currentMode === 'img2img' || this.currentMode === 'inpaint') && !this.uploadedFile) {
                    this.showToast('Please upload an image first', 'warning');
                    return;
                }

                const generateBtn = document.getElementById('generateBtn');
                generateBtn.disabled = true;
                generateBtn.textContent = '‚è≥ Generating...';

                try {
                    const jobData = {
                        task: this.currentMode,
                        prompt: prompt,
                        negative: document.getElementById('negativePrompt').value.trim(),
                        quality: this.getSelectedQuality(),
                        inputs: {
                            width: parseInt(document.getElementById('widthInput').value),
                            height: parseInt(document.getElementById('heightInput').value),
                            steps: parseInt(document.getElementById('stepsSlider').value),
                            guidance: parseFloat(document.getElementById('guidanceSlider').value)
                        },
                        seed: document.getElementById('seedInput').value ? parseInt(document.getElementById('seedInput').value) : null,
                        model_preference: document.getElementById('modelSelect').value || null
                    };

                    // Add uploaded file path if needed
                    if (this.uploadedFile) {
                        jobData.inputs.image_path = this.uploadedFile.path;
                    }

                    const response = await fetch('/api/jobs', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(jobData)
                    });

                    const result = await response.json();

                    if (result.ok) {
                        this.currentJob = result.job;
                        this.connectWebSocket(result.job.id);
                        this.showToast('Generation started!', 'info');
                    } else {
                        throw new Error('Job creation failed');
                    }
                } catch (error) {
                    console.error('Generation failed:', error);
                    this.showToast('Generation failed', 'error');
                    generateBtn.disabled = false;
                    generateBtn.textContent = 'üöÄ Generate AI Art';
                }
            }

            connectWebSocket(jobId) {
                const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
                const wsUrl = `${protocol}//${window.location.host}/ws/jobs/${jobId}`;
                
                this.websocket = new WebSocket(wsUrl);
                
                this.websocket.onopen = () => {
                    console.log('WebSocket connected');
                };
                
                this.websocket.onmessage = (event) => {
                    const data = JSON.parse(event.data);
                    this.updateProgress(data);
                };
                
                this.websocket.onclose = () => {
                    console.log('WebSocket disconnected');
                };
            }

            updateProgress(data) {
                const progressContainer = document.getElementById('progressContainer');
                const progressBar = document.getElementById('progressBar');
                const progressLabel = document.getElementById('progressLabel');
                
                progressContainer.style.display = 'block';
                progressBar.style.width = data.percent + '%';
                progressLabel.textContent = `${data.percent}% - ${data.text}`;
                
                if (data.status === 'completed') {
                    this.onGenerationComplete(data.job_id);
                } else if (data.status === 'failed') {
                    this.onGenerationFailed();
                }
            }

            async onGenerationComplete(jobId) {
                try {
                    // Get job results
                    const response = await fetch('/api/jobs');
                    const jobs = await response.json();
                    const completedJob = jobs.find(job => job.id === jobId);
                    
                    if (completedJob && completedJob.artifacts) {
                        this.showResults(completedJob.artifacts);
                        this.showToast('Generation completed!', 'success');
                    }
                } catch (error) {
                    console.error('Failed to get results:', error);
                }
                
                this.resetGenerateButton();
                document.getElementById('progressContainer').style.display = 'none';
            }

            onGenerationFailed() {
                this.showToast('Generation failed', 'error');
                this.resetGenerateButton();
                document.getElementById('progressContainer').style.display = 'none';
            }

            resetGenerateButton() {
                const generateBtn = document.getElementById('generateBtn');
                generateBtn.disabled = false;
                generateBtn.textContent = 'üöÄ Generate AI Art';
            }

            showResults(artifacts) {
                const resultsSection = document.getElementById('resultsSection');
                const resultsGrid = document.getElementById('resultsGrid');
                
                resultsSection.style.display = 'block';
                
                artifacts.forEach(artifactPath => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'result-item';
                    resultItem.style.cssText = `
                        background: var(--glass-bg);
                        border: 1px solid var(--border-primary);
                        border-radius: 16px;
                        overflow: hidden;
                        transition: all 0.3s ease;
                        position: relative;
                    `;
                    
                    resultItem.innerHTML = `
                        <img src="/${artifactPath}" style="width: 100%; aspect-ratio: 1; object-fit: cover;">
                        <div style="position: absolute; top: 8px; right: 8px; display: flex; gap: 4px; opacity: 0; transition: opacity 0.3s;">
                            <button onclick="studio.downloadImage('/${artifactPath}')" 
                                    style="width: 32px; height: 32px; border-radius: 50%; border: none; background: rgba(0,0,0,0.7); color: white; cursor: pointer;">üíæ</button>
                            <button onclick="studio.shareImage('/${artifactPath}')" 
                                    style="width: 32px; height: 32px; border-radius: 50%; border: none; background: rgba(0,0,0,0.7); color: white; cursor: pointer;">üîó</button>
                        </div>
                    `;
                    
                    resultItem.addEventListener('mouseenter', () => {
                        resultItem.querySelector('div[style*="opacity: 0"]').style.opacity = '1';
                        resultItem.style.transform = 'translateY(-4px)';
                    });
                    
                    resultItem.addEventListener('mouseleave', () => {
                        resultItem.querySelector('div[style*="opacity"]').style.opacity = '0';
                        resultItem.style.transform = 'translateY(0)';
                    });
                    
                    resultsGrid.appendChild(resultItem);
                });
                
                // Scroll to results
                resultsSection.scrollIntoView({ behavior: 'smooth' });
            }

            downloadImage(imagePath) {
                const link = document.createElement('a');
                link.href = imagePath;
                link.download = imagePath.split('/').pop();
                link.click();
            }

            shareImage(imagePath) {
                const fullUrl = window.location.origin + imagePath;
                if (navigator.share) {
                    navigator.share({
                        title: 'AI Generated Image',
                        url: fullUrl
                    });
                } else {
                    navigator.clipboard.writeText(fullUrl);
                    this.showToast('URL copied to clipboard!', 'success');
                }
            }

            getSelectedQuality() {
                const activeBtn = document.querySelector('.preset-btn.active');
                return activeBtn ? activeBtn.dataset.quality : 'BALANCED';
            }

            formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

            showToast(message, type = 'info') {
                const toast = document.createElement('div');
                const colors = {
                    success: '#16a34a',
                    error: '#dc2626',
                    warning: '#f59e0b',
                    info: '#6aa3ff'
                };
                
                toast.style.cssText = `
                    position: fixed;
                    bottom: 24px;
                    right: 24px;
                    background: ${colors[type]};
                    color: white;
                    padding: 16px 20px;
                    border-radius: 12px;
                    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
                    z-index: 10000;
                    animation: slideIn 0.3s ease;
                    font-weight: 500;
                `;
                
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => toast.remove(), 300);
                }, 3000);
            }
        }

        // Global functions
        window.selectMode = function(mode) {
            if (!window.studio) return;
            
            window.studio.currentMode = mode;
            
            // Update UI
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.mode === mode);
            });
            
            // Show/hide upload section
            const uploadSection = document.getElementById('uploadSection');
            uploadSection.style.display = (mode === 'img2img' || mode === 'inpaint') ? 'block' : 'none';
        };

        window.selectQuality = function(quality) {
            document.querySelectorAll('.preset-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.quality === quality);
            });
        };

        window.addStyle = function(style) {
            const promptInput = document.getElementById('mainPrompt');
            const current = promptInput.value.trim();
            promptInput.value = current ? `${current}, ${style}` : style;
        };

        window.setDimensions = function(width, height) {
            document.getElementById('widthInput').value = width;
            document.getElementById('heightInput').value = height;
        };

        window.randomSeed = function() {
            document.getElementById('seedInput').value = Math.floor(Math.random() * 2147483647);
        };

        window.randomizeSettings = function() {
            // Random dimensions
            const sizes = [512, 768, 1024];
            const randomWidth = sizes[Math.floor(Math.random() * sizes.length)];
            const randomHeight = sizes[Math.floor(Math.random() * sizes.length)];
            
            document.getElementById('widthInput').value = randomWidth;
            document.getElementById('heightInput').value = randomHeight;
            
            // Random guidance
            const guidance = (Math.random() * 10 + 5).toFixed(1);
            document.getElementById('guidanceSlider').value = guidance;
            document.getElementById('guidanceValue').textContent = guidance;
            
            // Random steps
            const steps = Math.floor(Math.random() * 30 + 20);
            document.getElementById('stepsSlider').value = steps;
            document.getElementById('stepsValue').textContent = steps;
            
            // Random seed
            randomSeed();
            
            window.studio?.showToast('Settings randomized!', 'info');
        };

        window.clearPrompts = function() {
            document.getElementById('mainPrompt').value = '';
            document.getElementById('negativePrompt').value = '';
        };

        window.triggerUpload = function() {
            document.getElementById('fileInput').click();
        };

        window.generateImage = function() {
            window.studio?.generateImage();
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            window.studio = new CreateStudio();
            
            // Add CSS animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
                .pulse {
                    animation: pulse 2s infinite;
                }
                @keyframes pulse {
                    0%, 100% { opacity: 0.5; }
                    50% { opacity: 1; }
                }
                .mode-selector {
                    display: flex;
                    background: var(--bg-secondary);
                    border-radius: 16px;
                    padding: 6px;
                    margin-bottom: 24px;
                    border: 1px solid var(--border-primary);
                }
                .mode-btn {
                    flex: 1;
                    padding: 12px 16px;
                    border: none;
                    background: transparent;
                    color: var(--text-muted);
                    border-radius: 12px;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    font-weight: 600;
                    font-size: 14px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 4px;
                }
                .mode-btn.active {
                    background: var(--accent-gradient);
                    color: white;
                    box-shadow: 0 4px 16px rgba(106, 163, 255, 0.4);
                }
                .progress {
                    position: relative;
                    width: 100%;
                    height: 14px;
                    background: var(--bg-secondary);
                    border: 1px solid var(--border-primary);
                    border-radius: 999px;
                    overflow: hidden;
                }
                .progress .bar {
                    position: absolute;
                    top: 0;
                    left: 0;
                    height: 100%;
                    background: var(--accent-gradient);
                    border-radius: 999px;
                    transition: width 0.3s ease;
                    box-shadow: 0 0 10px rgba(106, 163, 255, 0.5);
                }
                .progress .label {
                    position: absolute;
                    inset: 0;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 11px;
                    font-weight: 600;
                    color: var(--text-primary);
                    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
                    z-index: 1;
                }
                .create-container {
                    background: linear-gradient(135deg, rgba(106, 163, 255, 0.1), rgba(184, 132, 255, 0.05));
                    border-radius: 24px;
                    padding: 32px;
                    border: 1px solid rgba(106, 163, 255, 0.2);
                }
            `;
            document.head.appendChild(style);
        });
    </script>
<script type="module" src="assets/api.js"></script>
<script type="module" src="assets/uploader.js"></script>
<script type="module" src="assets/create.page.js"></script>
</body>
</html>